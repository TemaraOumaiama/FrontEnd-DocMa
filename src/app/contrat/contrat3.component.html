<div class="container">
   <div class="row mb-2 mt-2 text-center">
     <div class="col-md-4">
     </div>
     <div class="col-md-4">
       <h5>contrat Management Portal</h5>
       <small *ngIf="titleAction$ | async as title">{{ title }}</small>
     </div>
     <div class="col-md-4">
     </div>
   </div>
 

   <script> // Récupérer le bouton de basculement
    var toggleButton = document.querySelector(".navbar-toggler");
    
    // Récupérer la barre latérale
    var sidebar = document.getElementById("sidebarMenu");
    
    // Ajouter un gestionnaire d'événements pour le clic sur le bouton de basculement
    toggleButton.addEventListener("click", function() {
      // Vérifier si la barre latérale est actuellement affichée ou cachée
      var isSidebarHidden = sidebar.classList.contains("show");
    
      // Afficher ou cacher la barre latérale en fonction de son état actuel
      if (isSidebarHidden) {
        sidebar.classList.remove("show");
      } else {
        sidebar.classList.add("show");
      }
    });
    </script>

   <!-- nav bar -->
   

   <nav
   id="sidebarMenu"
   class="collapse d-lg-block sidebar collapse bg-white"
   >
<div class="position-sticky">
  <div class="list-group list-group-flush mx-3 mt-4">


    <a routerLink="/homepage" routerLinkActive="active" ariaCurrentWhenActive="page" style =" margin-top: 30px; "class="PERS list-group-item list-group-item-action py-2 ripple  margin-top-10">
      <i class="fas fa-home"></i>
      <span >Acceuil</span>
    </a>

   
    <a
    routerLink="/dossier" routerLinkActive="active" ariaCurrentWhenActive="page"
       class=" list-group-item-action py-2 ripple PERS "
       style="margin-left: 10px;"
       >
       <i class="fa-solid fa-folder"></i>
       <span>Gestion des dossiers</span>
      
    </a>


    <div class="list-group-item ">


    <a
    routerLink="/document" routerLinkActive="active" ariaCurrentWhenActive="page"
       class=" list-group-item-action py-2 ripple PERS "
       >
       <i class="fa-solid fa-file"></i>
       <span> Gestion des documents Juridiques</span>
      
    </a>



 


    <script>
    document.getElementById("importLink").addEventListener("click", function(event) {
      event.preventDefault(); // Empêche le lien de rediriger vers une autre page
    
      // Affichez vos documents récupérés ici
      alert("Documents non lus récupérés avec succès.");
    });
    </script>
          <div> 
 

            <a
            routerLink="/veille" routerLinkActive="active" ariaCurrentWhenActive="page"
               class=" list-group-item-action py-2 ripple PERS "
               >
         
               <span> Consulter les rapport de veille juridique</span>
              
            </a>     
  
  
  
  
  </div>
  </div>
    <a
    routerLink="/contrat" routerLinkActive="active" ariaCurrentWhenActive="page"
       class="list-group-item list-group-item-action py-2 ripple PERS "
       >
       <i class="fa-solid fa-file-contract"></i>           <span>Gestion des contrats</span>
    </a>
    <div> 
    <a
    routerLink="/departement" routerLinkActive="active" ariaCurrentWhenActive="page"
       class="list-group-item list-group-item-action py-2 ripple PERS "
       >
       <i class="fa-solid fa-layer-group"></i>
        <span>Gestion des départements</span>
    </a>


    <a
    routerLink="/categorie" routerLinkActive="active" ariaCurrentWhenActive="page"
       class="list-group-item list-group-item-action py-2 ripple PERS "
       >
    
        <span>Gestion des catégories</span>
    </a>
 
    
    <a class="nav-item nav-link active ml-1"  data-toggle="tab" href="#contrats">
  
       <i class="fa-sharp fa-solid fa-contrat-group"></i>
       <span>Gestion des utilisateurs</span>  </a>
      
</div>
  </div>
</div>
</nav>
<!-- Sidebar -->

<!-- Navbar -->
<nav
   id="main-navbar"
   class="navbar navbar-expand-lg navbar-light bg-white fixed-top"
   >
<!-- Container wrapper -->
<div class="container-fluid">
  <!-- Toggle button -->
  <button
          class="navbar-toggler"
          type="button"
          data-mdb-toggle="collapse"
          data-mdb-target="#sidebarMenu"
          aria-controls="sidebarMenu"
          aria-expanded="false"
          aria-label="Toggle navigation"
          >
    <i class="fas fa-bars"></i>
  </button>

  <!-- Brand -->

    <img src="assets/LOGO.png" style="margin-right:600px;margin-left: -600px;" height="50" alt="hello" loading="lazy" />


  <!-- Search form 
  <form class="d-none d-md-flex input-group w-auto my-auto">
    <input
           autocomplete="off"
           type="search"
           class="form-control rounded"
           placeholder='Search (ctrl + "/" to focus)'
           style="min-width: 225px"
           />

  </form>
-->


  <!-- Right links -->
  <ul class="navbar-nav ms-auto d-flex flex-row" style="margin-right: -400px;margin-left: 100px;" >
    <!-- Notification dropdown -->
    <li class="nav-item dropdown">
      <a
         class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow"
         href="#"
         id="navbarDropdownMenuLink"
         role="button"
         data-mdb-toggle="dropdown"
         aria-expanded="false"
         >
        <i class="fas fa-bell"></i>
        <span class="badge rounded-pill badge-notification bg-danger"
              >1</span
          >
      </a>
      <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuLink"
          >
        <li><a class="dropdown-item" href="#">Some news</a></li>
        <li><a class="dropdown-item" href="#">Another news</a></li>
        <li>
          <a class="dropdown-item" href="#">Something else here</a>
        </li>
      </ul>
    </li>

   
    

    <!-- Icon dropdown -->
    
    <!-- Avatar -->
    <li class="nav-item dropdown"  >
      <a
         class="nav-link dropdown-toggle hidden-arrow d-flex align-items-center"
         href="#"
         id="navbarDropdownMenuLink"
         role="button"
         data-mdb-toggle="dropdown"
         aria-expanded="false"
       
         >
        <img
        src="https://www.dreamjob.ma/wp-content/uploads/2022/06/Alsa-Maroc-Emploi-Recrutement-768x402.png"
        class="circle"
             height="40"
             alt=""
             loading="lazy"

           
             />
      </a>
      <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuLink"
          >
        <li><a class="dropdown-item" href="#">My profile</a></li>
        <li><a class="dropdown-item" href="#">Settings</a></li>
        <li><a class="dropdown-item" href="#">Logout</a></li>
      </ul>
    </li>
  </ul>
</div>
<!-- Container wrapper -->
</nav>



 
   <!-- main content -->
   <div class="tab-content mt-3"  style="margin-left: 100px;margin-top: 100px;" id="myTabContent">
     <!-- contrat table -->
     <div class="tab-pane fade show active" id="contrats">
       <div class="mb-3 float-right">
         <div class="btn-group mr-2">
          <form class="form-inline my-2 my-lg-0">
            <span style="margin-right: 800px;">
             <input  type="search" (ngModelChange)="searchContratss(key.value)" #key="ngModel" ngModel name="key" 
             id="searchName" class="form-control mr-sm-2" placeholder="Filter contrats..." required>
            </span>
         
         </form>
           <button type="button" class="btn btn-info" data-toggle="modal" data-target="#addUserModal">
             <i class="fa fa-plus"></i>New contrat
           </button>
         </div>
         <div class="btn-group">
           <button type="button" (click)="getContrats(true)" class="btn btn-info">
             <i *ngIf="refreshing" class="fas fa-sync fa-spin"></i><i *ngIf="!refreshing" class="fas fa-sync"></i>
           </button>
         </div>
       </div>
       <table class="table">
        <thead>
          <tr>
            <th> ID</th>
         
            <th>Nom</th>
            <th>Cree par</th>
        
            <th>Departement</th>
         <th>Partie Contractante</th>
            <th>Fournisseur</th>
            <th>Date Debut</th>
            <th>Date D'echance</th>
            <th> Délai de préavis </th>
            

            <th colspan="4" class="text-center">Options</th>
            <th class="text-center">Autres</th>

          </tr>
        </thead>
        <tbody *ngFor="let contrat of contrats" >
          <tr >
           
            <td>{{contrat?.id}}</td>

  <td>          
    <a
    routerLink="/suivicontrat" routerLinkActive="active" ariaCurrentWhenActive="page"
      
       >
    {{contrat?.nom}}
   
      
    </a> </td> 
        
            
            <td>{{contrat?.createdBy?.nom}}</td>
        
      
            <td>{{contrat?.departement?.nom}}</td>
   <td> {{contrat?.partieContractante}}</td>
            
            <td> {{contrat?.fournisseur}} </td>
            <td> {{contrat?.dateDebut}} </td>
            <td> {{contrat?.dateEchance}}</td>
           <td> 30j</td> 
           
           
            <td>
              <a (click)="onOpenModal(contrat, 'edit')" class="btn " data-placement="top" data-original-title="Edit">
                <i class="fa fa-pencil"></i> Edit
              </a>
            </td>
            <td>
              <a (click)="onOpenModal(contrat, 'delete')" class=" btn " data-placement="top" data-original-title="Delete">
                <i class="fa fa-times"></i> Delete
              </a>
            </td>

            <td>
              <a (click)="DownloadContrat(contrat.id)" class="btn " data-placement="top" data-original-title="View Contrat">
                <i class="fas fa-download"></i>
              </a>
            </td>
            <td>
              <a (click)="viewContrat(contrat.id)" class="btn" data-placement="top" data-original-title="View Contrat">
                <i class="far fa-eye"></i>
              </a>
            </td>

            <td>
              <td class="text-center" (click)="toggleDropdown()">
                Autres
              </td>
            </tr>
            <tr [ngClass]="{'collapse': !isDropdownOpen, 'show': isDropdownOpen}">
              <td colspan="3">
                <ul class="list-group">
                  <li class="list-group-item">  <a (click)="DownloadContrat(contrat.id)" class="btn " data-placement="top" data-original-title="View Contrat">
                <i class="fas fa-download"></i></a></li>
                  <li class="list-group-item">Option 2</li>
                  <li class="list-group-item">Option 3</li>
                </ul>
            </td>

          </tr>
        </tbody>
      </table>
     </div>
 
     <button [hidden]="true" type="button" id="openUserInfo" data-toggle="modal" data-target="#viewUserModal">
     </button>
     <button [hidden]="true" type="button" id="openUserEdit" data-toggle="modal" data-target="#editUserModal">
     </button>
 
  
 